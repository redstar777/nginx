(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00c12e3b"],{"148c":function(e,t,s){},5010:function(e,t,s){"use strict";s("bfa9")},5540:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("p",{staticClass:"titlep",on:{click:function(t){return e.gopath("/login")}}},[s("svg-icon",{staticClass:"logo",attrs:{"icon-class":"logo"}}),s("span",[e._v("DQBasic-基础开发平台")])],1),e._m(0),s("div",{staticClass:"centerbox"},[s("el-steps",{attrs:{space:300,active:e.active,"align-center":""}},[s("el-step",{attrs:{title:"输入邮箱"}}),s("el-step",{attrs:{title:"输入验证码"}}),s("el-step",{attrs:{title:"重置密码"}})],1),1==e.active?s("div",{staticClass:"formbox"},[s("p",{staticClass:"formtitle"},[e._v("重置密码")]),s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"0px"}},[s("el-form-item",{attrs:{label:"",prop:"email"}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),s("el-form-item",{attrs:{label:"",prop:"verCode"}},[s("el-input",{attrs:{placeholder:"请输入图片验证码"},model:{value:e.form.verCode,callback:function(t){e.$set(e.form,"verCode",t)},expression:"form.verCode"}}),s("img",{staticClass:"verCode",attrs:{src:e.verImage,alt:""},on:{click:e.getcaptchimg}})],1),s("el-button",{staticClass:"nextbtn",attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return e.validatorEmai(2)}}},[e._v("下一步")]),s("p",{staticClass:"tips"},[e._v(" 提示：如果您的邮箱不可使用，请您通过其他方式联系系统管理员 ")])],1)],1):e._e(),2==e.active?s("div",{staticClass:"formbox"},[s("p",{staticClass:"formtitle formtitle2"},[e._v("重置密码")]),s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"0px"}},[s("el-form-item",{attrs:{label:"",prop:"verCodeEmail"}},[s("el-input",{attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.form.verCodeEmail,callback:function(t){e.$set(e.form,"verCodeEmail",t)},expression:"form.verCodeEmail"}}),e.emailflag?s("span",{staticClass:"wsd"},[e._v("未收到？")]):e._e(),e.emailflag&&e.totaltime>0?s("span",{staticClass:"zfs"},[e._v(e._s(e.zfscontent))]):e._e(),e.emailflag&&e.totaltime<=0?s("span",{staticClass:"zfs",on:{click:function(t){return e.sendemailcode(2)}}},[e._v(e._s(e.zfscontent))]):e._e()],1),s("el-button",{staticClass:"nextbtn2",on:{click:function(t){return e.gopro(1)}}},[e._v("上一步")]),s("el-button",{staticClass:"nextbtn2",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit(3,!1)}}},[e._v("下一步")])],1)],1):e._e(),3!=e.active||e.okflag?e._e():s("div",{staticClass:"formbox"},[s("p",{staticClass:"formtitle"},[e._v("重置密码")]),s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"0px"}},[s("el-form-item",{attrs:{label:"",prop:"newPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请设置您的密码（6-20位，包含大小写字母、数字）"},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1),s("el-form-item",{attrs:{label:"",prop:"surepassword"}},[s("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.form.surepassword,callback:function(t){e.$set(e.form,"surepassword",t)},expression:"form.surepassword"}})],1),s("el-button",{staticClass:"nextbtn",attrs:{type:"primary"},on:{click:function(t){return e.onSubmit(3,!0)}}},[e._v("完成")])],1)],1),3==e.active&&e.okflag?s("div",{staticClass:"formbox"},[s("p",{staticClass:"oktitle",staticStyle:{"margin-top":"100px"}},[s("svg-icon",{staticClass:"logo",attrs:{"icon-class":"ok"}}),s("span",{staticStyle:{"margin-left":"10px"}},[e._v("重置成功")])],1),s("p",{staticClass:"okcontent"},[e._v(" 提示：系统将会在"),s("span",{staticStyle:{color:"red"}},[e._v(e._s(e.timenum))]),e._v("秒内跳转至登录页面... ")]),s("el-button",{staticClass:"nextbtn",staticStyle:{width:"70%"},attrs:{type:"primary"},on:{click:function(t){return e.gopath("/login")}}},[e._v("直接登录")])],1):e._e(),s("div",{staticClass:"goback",on:{click:function(t){return e.gopath("/login")}}},[s("svg-icon",{staticClass:"logo",attrs:{"icon-class":"back"}}),s("span",[e._v("返回登录")])],1)],1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topbox"},[a("img",{attrs:{src:s("d86f"),alt:""}})])}],i=(s("d9e2"),s("c24f")),o=s("61f7"),l=s("ed08"),n={name:"ForgetPw",data:function(){var e=this,t=function(e,t,s){t?t&&!Object(o["checkEmail"])(t)?s(new Error("邮箱格式不正确")):s():s(new Error("请输入邮箱"))},s=function(e,t,s){t?t&&!Object(o["checkPwd"])(t)?s(new Error("密码格式不正确（6-20位，包含大小写字母、数字）")):s():s(new Error("请输入密码"))},a=function(t,s,a){""===s?a(new Error("请再次输入密码")):s!==e.form.newPassword?a(new Error("两次输入密码不一致!")):a()};return{active:1,form:{email:"",verKey:"",verCode:"",newPassword:"",surepassword:"",verKeyEmail:"",verCodeEmail:""},rules:{email:[{required:!0,trigger:"blur",validator:t}],verCode:[{required:!0,trigger:"blur",message:"请输入图片验证码"}],verCodeEmail:[{required:!0,trigger:"blur",message:"请输入邮箱验证码"}],newPassword:[{required:!0,trigger:"blur",validator:s}],surepassword:[{required:!0,trigger:"blur",validator:a}]},emailflag:!1,okflag:!1,timenum:3,timer:"",zfscontent:"60s后再次发送",totaltime:60,timer2:null,verImage:"",disabled:!1}},mounted:function(){this.getcaptchimg()},methods:{getcaptchimg:function(){var e=this;Object(i["getcaptch"])().then((function(t){console.log("yanzhengma",t),t.success&&(e.verImage=t.data.verImage,e.form.verCode="",e.form.verKey=t.data.verKey),console.log(e.form)}))},gopath:function(e){this.$router.push({path:e})},gopro:function(e){this.disabled=!1,this.active=e,this.verImage="",this.form.verCode="",this.getcaptchimg()},onSubmit:function(e,t){var s=this;this.$refs["form"].validate((function(a){if(a){if(console.log("submit!"),3==e&&!t){var r={email:s.form.email,verKeyEmail:s.form.verKeyEmail,verCodeEmail:s.form.verCodeEmail};Object(i["validatorEmailAuthCode"])(r).then((function(t){t.success?(s.$message({message:"验证成功",type:"success"}),s.active=e,s.okflag=!1):s.$message({message:t.message,type:"error"})}))}if(3==e&&t){s.okflag=!1;var o={email:s.form.email,newPassword:s.form.newPassword},n=Object(l["encryption"])({data:o});Object(i["resetPwdEmail"])(n).then((function(t){t.success?(s.$message({message:"修改成功",type:"success"}),s.active=e,s.okflag=!0,s.timer||(s.timenum=3,s.timer=setInterval((function(){s.timenum>0&&s.timenum<=3?s.timenum--:(clearInterval(s.timer),s.timer=null,s.$router.push({path:"/login"}))}),1e3))):s.$message({message:t.message,type:"error"})}))}}}))},time60:function(){var e=this;this.emailflag=!0,this.totaltime=60,this.zfscontent=this.totaltime+"s后再次发送",this.timer2||(this.timer2=setInterval((function(){e.totaltime>0&&e.totaltime<=60?(e.totaltime--,e.zfscontent=e.totaltime+"s后再次发送"):(clearInterval(e.timer2),e.timer2=null,e.zfscontent="再次发送")}),1e3))},validatorEmai:function(e){var t=this;this.$refs["form"].validate((function(s){if(s){t.disabled=!0;var a={email:t.form.email,verKey:t.form.verKey,verCode:t.form.verCode};console.log("boj--",a),setTimeout((function(){t.getcaptchimg()}),2e3),Object(i["tovalidatorEmai"])(a).then((function(s){console.log("qingiqu ",s),s.success?t.sendemailcode(e):t.$message({message:s.message,type:"error"})})).catch((function(){console.log("catch11 "),setTimeout((function(){t.disabled=!1}),2e3)}))}}))},sendemailcode:function(e){var t=this,s={email:this.form.email};Object(i["getsendMailAuthCode"])(s).then((function(s){s.success&&(t.$message({message:"发送成功",type:"success"}),t.time60(),t.form.verKeyEmail=s.data,t.form.verCodeEmail="",t.active=e)}))}}},c=n,m=(s("a9f0"),s("5010"),s("2877")),f=Object(m["a"])(c,a,r,!1,null,"a880bdbe",null);t["default"]=f.exports},a9f0:function(e,t,s){"use strict";s("148c")},bfa9:function(e,t,s){},d86f:function(e,t,s){e.exports=s.p+"static/img/img_top.5756510c.png"}}]);